# PHP-advanced

## Homework_1

1. Придумать класс, который описывает любую сущность из предметной области интернет-магазинов: продукт, ценник, посылка и т.п. или любой другой области.

2. Описать свойства класса из п.1 (состояние).

3. Описать поведение класса из п.1 (методы).

4. Придумать наследников класса из п.1. Чем они будут отличаться? Привести пример, создать экземпляры классов и вызвать их методы для примера.

5. Дан код:
```
class A {
    public function foo() {
        static $x = 0;
        echo ++$x;
    }
}
$a1 = new A();
$a2 = new A();
$a1->foo();
$a2->foo();
$a1->foo();
$a2->foo();
```
Что он выведет на каждом шаге? Почему?

Немного изменим п.5:
```
class A {
    public function foo() {
        static $x = 0;
        echo ++$x;
    }
}
class B extends A {
}
$a1 = new A();
$b1 = new B();
$a1->foo();
$b1->foo();
$a1->foo();
$b1->foo();
```

6. Объясните результаты в этом случае.

7. *Дан код:
```
class A {
    public function foo() {
        static $x = 0;
        echo ++$x;
    }
}
class B extends A {
}
$a1 = new A;
$b1 = new B;
$a1->foo();
$b1->foo();
$a1->foo();
$b1->foo();
```

Что он выведет на каждом шаге? Почему?

## Homework_2

1. Переписать автозагрузчик. Добавить пространство имен всем классам.

2. Расширить проект, добавив свои модели (корзины, заказов).

3. (Если были замечания по 1 заданию и для закрепления). Создать структуру классов ведения товарной номенклатуры.
```
а) Есть абстрактный товар.

б) Есть цифровой товар, штучный физический товар и товар на вес.

в) У каждого есть метод подсчета финальной стоимости.

г) У цифрового товара стоимость постоянная – дешевле штучного товара в два раза.
   У штучного товара обычная стоимость, у весового – в зависимости от продаваемого количества в килограммах.
   У всех формируется в конечном итоге доход с продаж.

д) Что можно вынести в абстрактный класс, наследование?
```

## Homework_3

1. Создать архитектуру БД для магазина, продукты, клиенты, заказы, категории (создать таблицы и связи).

2. Сделать модели для таблиц.

3. Изучить документацию по PDO.

4. В моделях добавить CRUD-блок для операций с БД. *Update как успеете
```
Пример как должно работать:
$product = new Product("Пицца","Описание", 125); стоимость и т.д.
$product->insert(); добавим этот продукт в БД (ВАЖНОЕ!)
$product->delete(); удалим его из БД
Обратите внимание, в методах нет id или еще чего-либо, мыслим как объект.
```
*Сделать так, чтобы getOne возвращал не ассоциативный массив, а объект с заполненными соответствующими свойствами из БД.

## Homework_4

1. Реализовать модель MVC в своем проекте, сделать контроллер продукта как в лекции, реализовать отображение каталога и карточки товара.

2. Сделать еще один любой контроллер. (корзина, отзывы и т.п.)

3. Доделать CRUD для модели. Подумать как в update обновлять только поля, которые изменились. Как фильтровать не нужные поля, подумать как бы корректно создавать объект без статики. (Только подумать!)

*В каталоге выводить не все товары сразу, а скажем по 10 штук, и сделать кнопочку "еще", отображающие уже 20 товаров и т.д.

**По нажатию кнопки "еще" подгружать +10 товаров в dom - документа асинхронно через ajax.

## Homework_5

1. Разобраться с принципом SOLID, почитать ссылки.

2. Через composer скачать twig и подключить к проекту. Сделать шаблоны товара и всех товаров на twig. (Методичка 3-го урока) Постарайтесь, чтобы экземпляр Twig было один, а не столько, сколько раз вызывается renderTemplate для построения шаблона.

*Сделать авторизацию пользователя.

## Homework_6

1. Разобраться с доработками движка. crud должен быть готов.

2. Товар должен помещаться и удаляться из корзины асинхронно.

3. Улучшить авторизацию (используя хеш и куки). Переписать авторизацию через Request.

*Сделать класс для работы с сессиями Session по аналогии с request.

## Homework_7

1. Разобраться с принципом работы PHPUnit. Попробовать примеры из методички.

2. Продолжить работу над корзиной, авторизацией и оформлением заказа, сделать обработку ошибок.

3. Написать несколько модульных тестов. Например сделайте детальное тестирование сущности продукт.

*Переделать проект под репозитарий.

## Homework_8

Доделать магазин, как минимум чтобы была админка, с возможностью админа видеть заказы. Версия движка любая, желательно финальная. На работу неделя, баллы начнуть падать после 3-х дней.

1. Добавить в корзину кнопочку "оформить заказ", которая либо перенаправит на страницу оформления заказа, либо прямо в корзине дорисуйте дополнительные поля для ввода имени, или телефона, почты пользователя, и по нажатию оформить заказ, в базе данных orders должна создаться одна запись вида например (session, email), по этой записи по сессии можно будет получить корзину пользователя email.

2. Для администратора сделайте страницу админка, где выведите список заказов, т.е. таблицу orders. Саму сессию выводить не нужно, достаточно просто вывести номер, слово Заказ и email, по нажатию на который уже на отдельной странице можно увидеть детали заказа (отдельный запрос по сессии на корзину этого пользователя).

3. Добавьте статусы для таблицы orders, вида заказ оформлен, в работе, оплачен, обработан и т.п. Сделайте функционал админу для изменения этих статусов.

*Авторизация на сессиях и куках с хешем.

*Движок должен работать на репозитариях.

*Движок должен работать как экземпляр app.
